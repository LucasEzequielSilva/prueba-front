<div class="flex flex-col gap-4 relative -top-8 z-10">
  <h1 class="font-bold text-3xl text-white relative left-16 w-fit inline-block">Productos</h1>
  <div class="flex gap-2">
    <!-- SEARCHBAR -->
    <div class="w-full bg-secondary rounded-xl flex justify-between h-[54px] items-center p-2 sm:p-4 grow">
      <input
        class="px-2 w-10/12 bg-transparent self-stretch outline-none caret-white rounded focus:border-blue-500 text-acento placeholder:text-sm sm:placeholder:text-sm md:placeholder:text-lg"
        type="text" name="" id="" placeholder="Escribe el producto que buscas..." />
      <button class="w-2/10 flex justify-center items-center self-stretch">
        <img class="w-6 h-6 pointer-events-none" src="../../assets/search.svg" />
      </button>
    </div>
    <!-- BARCODE -->
    <button class="bg-[#4A4458] p-2 grow rounded-xl min-w-[54px] flex justify-center items-center">
      <img class="pointer-events-none w-8" src="../../assets/barcode_scanner.svg" alt="barcode_scanner">
    </button>
  </div>
  
  <ng-container *ngIf="loading; then skeleton; else content;">
  </ng-container>
  <!-- card -->
  <ng-template #content>
    <div class="flex flex-col md:flex-row gap-4 flex-wrap mt-4 lg:grid lg:grid-cols-2 xl:grid-cols-3" >
      <div *ngFor="let card of cards" class="flex rounded-xl bg-[#2C2934] h-[134px] sm:h-[186px] md:h-[232px] w-full md:grow lg:grow-0 ">
        <img class="w-[99px] sm:w-[150px] md:w-[30%] lg:w-1/2 object-cover object-center rounded-l-xl" [src]="'../../assets/images/' + card.image" alt="choco">
        <div class="flex py-2 pl-4 grow justify-between lg:w-1/2">
          <div class="flex flex-col justify-between">
            <div class="flex flex-col gap-[10px]">
              <span class="text-lg font-bold text-acento leading-tight md:text-2xl">{{card.name.includes("Chocofan") ? '$200 X 3 Chocofan 37Gr' : card.name}}</span>
              <div
              [ngClass]="[
              'px-[8px] py-[5px] w-fit h-fit rounded-full text-xs font-medium flex justify-center items-center text-white',
              (card.stock && card.visible) ? 'bg-[#437330]' : (card.visible ? 'bg-[#857101]' : 'bg-[#5D0000]')
            ]">
                <span class="not-italic leading-both">{{ (card.stock && card.visible) ? 'HABILITADO - CON STOCK' : (card.visible ? 'VISIBLE - SIN STOCK' : 'OCULTO') }}</span></div>
            </div>
            <div class="flex gap-5 items-end">
              <div [class]="'w-10 h-6 rounded-[100px] flex items-center p-0.5 ' + (isSuccess?'bg-[#6CC24A]' : 'bg-[#B40000]')">
                <div (click)="toggleState()"
                  [class]="'rounded-full w-5 h-5 flex justify-center items-center cursor-pointer ' + (!isSuccess ? 'bg-[#5E0000] transform translate-x-0 transition-all duration-150 ease-in' : 'bg-[#437330] transform translate-x-4 transition-all duration-150 ease-out')">
                  <!-- bola -->
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <ng-template [ngIf]="isSuccess" [ngIfElse]="isFailed">
                      <path
                        d="M5.99998 10.78L3.21998 7.99999L2.27332 8.93999L5.99998 12.6667L14      4.66665L13.06 3.72665L5.99998 10.78Z"
                        fill="#F3FFEE" />
                    </ng-template>
                    <ng-template #isFailed>
                      <path
                        d="M12.6666 4.27333L11.7266 3.33333L7.99998 7.06L4.27331 3.33333L3.33331 4.27333L7.05998 8L3.33331 11.7267L4.27331 12.6667L7.99998 8.93999L11.7266 12.6667L12.6666 11.7267L8.93998 8L12.6666 4.27333Z"
                        fill="#FFE4E4" />
      
                    </ng-template>
                  </svg>
                </div>
              </div>
              <span class="font-bold text-xl text-acento">{{'$'+card.price.toLocaleString()}}</span>
            </div>
          </div>
          <a class="p-4 self-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="20" viewBox="0 0 12 20" fill="none">
              <path d="M1.48332 16.4667L7.94999 10L1.48332 3.53333C0.833319 2.88333 0.833319 1.83333 1.48332 1.18333C2.13332 0.533331 3.18332 0.533331 3.83332 1.18333L11.4833 8.83333C12.1333 9.48333 12.1333 10.5333 11.4833 11.1833L3.83332 18.8333C3.18332 19.4833 2.13332 19.4833 1.48332 18.8333C0.849986 18.1833 0.833319 17.1167 1.48332 16.4667Z" fill="white"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- skeleton -->
  <ng-template #skeleton>
    <div class="flex flex-col md:flex-row gap-4 flex-wrap mt-4 lg:grid lg:grid-cols-2 xl:grid-cols-3">
      <div class="flex rounded-xl bg-[#2C2934] h-[134px] sm:h-[186px] w-full md:grow lg:grow-0 ">
        <ngx-skeleton-loader
        class="w-[30%]"
        animation="pulse"
        [theme]="{
          'border-radius': '12px 0 0 12px',
          'height': '100%',
          'background-color': '#999',
          'animation-duration': '2s'
        }"
      >
      </ngx-skeleton-loader>
      
        <div class="flex flex-col justify-between p-4 grow">
          <div class="flex flex-col w-full">
            <ngx-skeleton-loader [theme]="{background: '#999', width:'100%'}"></ngx-skeleton-loader>
            <ngx-skeleton-loader [theme]="{background: '#999', width:'90%'}"></ngx-skeleton-loader>
          </div>
            <ngx-skeleton-loader [theme]="{background: '#999', width:'90%'}"></ngx-skeleton-loader>
        </div>
      </div>
      <div class="flex rounded-xl bg-[#2C2934] h-[134px] sm:h-[186px] w-full md:grow lg:grow-0 ">
        <ngx-skeleton-loader
        class="w-[30%]"
        animation="pulse"
        [theme]="{
          'border-radius': '12px 0 0 12px',
          'height': '100%',
          'background-color': '#999',
          'animation-duration': '2s'
        }"
      >
      </ngx-skeleton-loader>
      
        <div class="flex flex-col justify-between p-4 grow">
          <div class="flex flex-col w-full">
            <ngx-skeleton-loader [theme]="{background: '#999', width:'100%'}"></ngx-skeleton-loader>
            <ngx-skeleton-loader [theme]="{background: '#999', width:'90%'}"></ngx-skeleton-loader>
          </div>
            <ngx-skeleton-loader [theme]="{background: '#999', width:'90%'}"></ngx-skeleton-loader>
        </div>
      </div>
      <div class="flex rounded-xl bg-[#2C2934] h-[134px] sm:h-[186px] w-full md:grow lg:grow-0 ">
        <ngx-skeleton-loader
        class="w-[30%]"
        animation="pulse"
        [theme]="{
          'border-radius': '12px 0 0 12px',
          'height': '100%',
          'background-color': '#999',
          'animation-duration': '2s'
        }"
      >
      </ngx-skeleton-loader>
      
        <div class="flex flex-col justify-between p-4 grow">
          <div class="flex flex-col w-full">
            <ngx-skeleton-loader [theme]="{background: '#999', width:'100%'}"></ngx-skeleton-loader>
            <ngx-skeleton-loader [theme]="{background: '#999', width:'90%'}"></ngx-skeleton-loader>
          </div>
            <ngx-skeleton-loader [theme]="{background: '#999', width:'90%'}"></ngx-skeleton-loader>
        </div>
      </div>
    </div>
  </ng-template>